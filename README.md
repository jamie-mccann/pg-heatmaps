# PlantGenie

A web application for genome resources at the Ume√• Plant Science Center.

## Backend

The backend is a FastAPI application using a uvicorn server. It also hosts
the static files generated by the yarn build of the react frontend.

## Frontend

React frontend in typescript is located under the Python FastAPI application. The
`yarn build` generates a build output under `./plantgenie_heatmaps/pg-react-frontend/dist`,
which FastAPI points to `/static/`.

## Docker

The dockerfile contains a multi-stage build of the react and fastapi applications. The
output of the `yarn build` step is copied over into the second stage where the fastapi
application is built. The FastAPI application can then just pick up the static files.

For local testing you can run:


```bash
docker build -t pg-heatmaps:local-latest -f Dockerfile .
```

```bash
docker run -it -p 8080:80 pg-heatmaps:local-latest
```

The docker container will expose port 80 where the uvicorn server is running and
the above run command will map it to your localhost 8080 port.

## Issues
Currently hosted on goodall on the upsc network. Must either be on eduroam or
the UMU VPN. On Google Chrome you may have to set:

`--unsafely-treat-insecure-origin-as-secure=<goodall-domain>`

as Chrome may block outgoing requests that result from UI interactions.
